'use strict';function BarChart(a,b,c,d){const e=this;e.configureChart(a,b,c,d),e.performOperations(),e.drawChart()}BarChart.prototype.configureChart=function(a,b,c,d){const e=this;e.setCanvasParameters(a,b,c,d),e.setChartParameters(a,b,c,d)},BarChart.prototype.setCanvasParameters=function(a,b,c,d){const e=this;e.id=a,e.width=b,e.height=c,e.data=d},BarChart.prototype.setChartParameters=function(){const a=this;a.axisRatio=10,a.verticalMargin=a.height*a.axisRatio/100,a.horizontalMargin=a.width*a.axisRatio/100,a.axisColor="#b1b1b1",a.axisWidth=.75,a.fontRatio=3,a.fontFamily="times",a.fontStyle="normal",a.fontWeight="300",a.fontColor="#666",a.verticalFontSize=a.height*a.fontRatio/100,a.horizontalFontSize=a.width*a.fontRatio/100,a.guidelineColor="#e5e5e5",a.guidelineWidth=.5},BarChart.prototype.performOperations=function(){const a=this;a.createCanvas(),a.handleData(),a.prepareData()},BarChart.prototype.createCanvas=function(){const a=this,b=document.createElement("canvas");b.id=a.id+"-"+Math.random(),b.width=a.width,b.height=a.height,document.getElementById(a.id).innerHTML="",document.getElementById(a.id).appendChild(b),a.canvas=b,a.context=b.getContext("2d")},BarChart.prototype.handleData=function(){const a=this;a.labels=[],a.values=[],a.data.forEach(b=>{a.labels.push(b.label),a.values.push(b.value)})},BarChart.prototype.prepareData=function(){const a=this;a.itemsNum=a.data.length,a.maxValue=Math.max.apply(null,a.values),a.minValue=Math.min.apply(null,a.values),a.verticalAxisWidth=a.height-2*a.verticalMargin,a.horizontalAxisWidth=a.width-2*a.horizontalMargin,a.verticalUpperBond=10*Math.ceil(a.maxValue/10),a.verticalLabelFreq=a.verticalUpperBond/a.itemsNum,a.horizontalLabelFreq=a.horizontalAxisWidth/a.itemsNum},BarChart.prototype.drawChart=function(){const a=this;a.drawVerticalAxis(),a.drawVerticalLabels(),a.drawHorizontalAxis(),a.drawHorizontalLabels(),a.drawHorizontalGuidelines(),a.drawVerticalGuidelines(),a.drawBars()},BarChart.prototype.drawVerticalAxis=function(){const a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.verticalMargin),a.context.lineTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},BarChart.prototype.drawHorizontalAxis=function(){const a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.lineTo(a.width-a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){const a=this,b=a.fontStyle+" "+a.fontWeight+" "+a.verticalFontSize+"px "+a.fontFamily;a.context.font=b,a.context.textAlign="right",a.context.fillStyle=a.fontColor;const c=a.verticalAxisWidth/a.verticalUpperBond*a.verticalLabelFreq;for(let b=0;b<=a.itemsNum;b+=1){const d=a.verticalUpperBond-b*a.verticalLabelFreq,e=a.horizontalMargin-a.horizontalMargin/a.axisRatio,f=a.verticalMargin+b*c;a.context.fillText(d,e,f)}},BarChart.prototype.drawHorizontalLabels=function(){const a=this,b=a.fontStyle+" "+a.fontWeight+" "+a.verticalFontSize+"px "+a.fontFamily;a.context.font=b,a.context.fillStyle=a.fontColor,a.context.textAlign="center",a.context.textBaseline="top";for(let b=0;b<a.itemsNum;b+=1){const c=a.horizontalMargin+b*a.horizontalLabelFreq+a.horizontalLabelFreq/2,d=a.height-a.verticalMargin+a.verticalMargin/a.axisRatio;a.context.fillText(a.labels[b],c,d)}},BarChart.prototype.drawHorizontalGuidelines=function(){const a=this;a.context.strokeStyle=a.guidelineColor,a.context.lineWidth=a.guidelineWidth;const b=a.verticalAxisWidth/a.verticalUpperBond*a.verticalLabelFreq;for(let c=0;c<=a.itemsNum;c+=1){const d=a.horizontalMargin,e=a.verticalMargin+c*b,f=a.horizontalMargin+a.horizontalAxisWidth,g=a.verticalMargin+c*b;a.context.beginPath(),a.context.moveTo(d,e),a.context.lineTo(f,g),a.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){const a=this;a.context.strokeStyle=a.guidelineColo;for(let b=0;b<=a.itemsNum;b+=1){const c=a.horizontalMargin+b*a.horizontalLabelFreq,d=a.height-a.verticalMargin,e=a.horizontalMargin+b*a.horizontalLabelFreq,f=a.verticalMargin;a.context.beginPath(),a.context.moveTo(c,d),a.context.lineTo(e,f),a.context.stroke()}},BarChart.prototype.drawBars=function(){const a=this;for(let b=0;b<a.itemsNum;b+=1){const c=a.createRandomRGBColor(),d="rgba("+c.r+", "+c.g+", "+c.b+", "+"0.3"+")",e="rgba("+c.r+", "+c.g+", "+c.b+")",f=a.horizontalMargin+b*a.horizontalLabelFreq+a.horizontalLabelFreq/a.axisRatio,g=a.height-a.verticalMargin,h=a.horizontalLabelFreq-2*a.horizontalLabelFreq/a.axisRatio,i=-1*a.verticalAxisWidth*a.values[b]/a.maxValue;a.context.strokeStyle=e,a.context.fillStyle=d,a.context.beginPath(),a.context.rect(f,g,h,i),a.context.stroke(),a.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){const a=getRandomInt(0,257),b=getRandomInt(0,257),c=getRandomInt(0,257);return{r:a,g:b,b:c}};function getRandomInt(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}
